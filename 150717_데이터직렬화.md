# 데이터 직렬화란?

* 프로그램내에서 구조체나 컨테이너등으로 구조화 된 데이터를 바이트 스트림으로 변환하는 것.
* 암호화에서 인코딩과 유사.
* 역직렬화 : 직렬화된 데이터를 본래 구조로 복원하는 것. 디코딩과 유사.

---
### 데이터 직렬화 이유

프로그램에서 파일이나 DB 저장시 혹은 네트워크 전송 시 구조화된 데이터를 그대로 보낼 수 없기 때문에 직렬화 한다.
예를 들어 객체를 통채로 전송하거나 저장 할 수 없기 때문이다.

* 병렬 구조 시 구성된 데이터 구조에 따라 데이터를 다루어야 하기 때문에 범용 포맷으로 데이터를 저장, 전송 시키기 위해 사용.
[http://www.joinc.co.kr/modules/moniwiki/wiki.php/man/12/golang/networkProgramming/Serialisation]

---
### 데이터 직렬화 활용

가장 기본 방식은 구조화된 데이터를 데이터 하나씩 버퍼에 정해진 규칙대로 저장하여 직렬화 하고 역직렬화시에도 정해진 규칙대로 다시 자료 구조에 삽입하는 방식.

* 오픈소소인 Protobuf 를 사용하면 직렬화/역직렬화
규칙을 신경 쓸 필요없이 함수 호출만으로 가능.
바이너리 포맷으로 직렬화를 하기 때문에 크로스 플랫폼에서 활용 가능.
[https://github.com/google/protobuf/]

* 비슷한 종류로 msgpack 이라는 것도 있다. protobuf 보다 빠르다고 한다.
[http://msgpack.org/]

* 데이터를 DB 저장 시 JSON 라이브러리를 사용하면 직관적이며 손쉽게 직렬화/역직렬화 가능. (단, 스트링기반으로 느리고 용량을 많이 차지한다.)
[https://github.com/google/gson]

* C#, java 같은 언어는 자체적으로 직렬화/역직렬화를 지원해주니 동일 플랫폼에서는 사용하면 좋다.

---
### 게임서버에서의 적용

* 유저의 이벤트 수행정보나 무기 수집정보 등 컨테이너에 존재하며 가변적인 데이터들은 DB 저장 시 직렬화하여 저장하였다.
* RDB 구조에서 스키마에 제한받지 않고 자유롭게 저장할 수 있었다.
* 단점으로 직렬화, 역직렬화에 오버헤드 발생.
